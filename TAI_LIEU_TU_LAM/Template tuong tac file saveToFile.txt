public static <T> List<T> readFromFile(String filePath) {
    List<T> list = new ArrayList<>();
    File file = new File(filePath);
    if (!file.exists()) return list;

    try (FileInputStream fis = new FileInputStream(file);
         ObjectInputStream ois = new ObjectInputStream(fis)) {
        while (fis.available() > 0) {
            @SuppressWarnings("unchecked")
            T obj = (T) ois.readObject();
            list.add(obj);
        }
    } catch (IOException | ClassNotFoundException e) {
        System.err.println("Error: " + e.getMessage());
    }
    return list;
}


=============================




### 1. Giáº£i thÃ­ch chi tiáº¿t code

<T> (Generics):
ÄÃ¢y lÃ  "kiá»ƒu dá»¯ liá»‡u Ä‘áº¡i diá»‡n". Khi gá»i hÃ m nÃ y cho `Customer`, `T` sáº½ lÃ  `Customer`. Khi dÃ¹ng cho `Order`, `T` sáº½ lÃ  `Order`. NÃ³ giÃºp code cá»±c ká»³ linh hoáº¡t.

File file = new File(filePath);: 
Kiá»ƒm tra xem file cÃ³ tá»“n táº¡i khÃ´ng. Náº¿u láº§n Ä‘áº§u cháº¡y chÆ°Æ¡ng trÃ¬nh (chÆ°a cÃ³ file `.dat`), nÃ³ sáº½ tráº£ vá» danh sÃ¡ch rá»—ng thay vÃ¬ bÃ¡o lá»—i vÃ  lÃ m sáº­p chÆ°Æ¡ng trÃ¬nh.

try (FileInputStream fis ...): 
ÄÃ¢y lÃ  **Try-with-resources**. NÃ³ sáº½ tá»± Ä‘á»™ng Ä‘Ã³ng file cho Báº¡n sau khi Ä‘á»c xong, giÃºp trÃ¡nh lá»—i "rÃ² rá»‰ bá»™ nhá»›" (memory leak).

while (fis.available() > 0): 
"Chá»«ng nÃ o trong file váº«n cÃ²n dá»¯ liá»‡u thÃ¬ cÃ²n Ä‘á»c".

ois.readObject(): Lá»‡nh "giáº£i nÃ©n". NÃ³ láº¥y cÃ¡c byte tá»« file vÃ  biáº¿n chÃºng ngÆ°á»£c láº¡i thÃ nh Ä‘á»‘i tÆ°á»£ng Java nguyÃªn váº¹n.

@SuppressWarnings("unchecked"): 
ÄÃ¢y lÃ  má»™t lá»i nháº¯n cho Java: "TÃ´i biáº¿t mÃ¬nh Ä‘ang Ã©p kiá»ƒu vá» `T`, Ä‘á»«ng hiá»‡n cáº£nh bÃ¡o mÃ u vÃ ng lÃ m phiá»n tÃ´i".

---

### 2. HÆ°á»›ng dáº«n sá»­ dá»¥ng Template nÃ y trong dá»± Ã¡n

Äá»ƒ dÃ¹ng Ä‘Æ°á»£c template nÃ y, Diá»‡p cáº§n phá»‘i há»£p giá»¯a lá»›p **`FileUtils`** (nÆ¡i chá»©a hÃ m) vÃ  cÃ¡c lá»›p **`Management`** (nÆ¡i sá»­ dá»¥ng).

#### BÆ°á»›c 1: HoÃ n thiá»‡n FileUtils.java

Diá»‡p chÃ©p code máº«u cá»§a Diá»‡p vÃ o lá»›p `FileUtils`. LÆ°u Ã½ pháº£i `import java.io.*` vÃ  `java.util.*`.

#### BÆ°á»›c 2: Gá»i hÃ m Ä‘á»ƒ láº¥y dá»¯ liá»‡u (Trong lá»›p Manager)

Giáº£ sá»­ Diá»‡p Ä‘ang á»Ÿ lá»›p `CustomerManager`, Diá»‡p sáº½ gá»i nhÆ° sau:

```java
// Khai bÃ¡o danh sÃ¡ch Ä‘á»ƒ chá»©a khÃ¡ch hÃ ng
List<Customer> customerList;

// DÃ¹ng FileUtils Ä‘á»ƒ náº¡p dá»¯ liá»‡u tá»« file khi vá»«a má»Ÿ chÆ°Æ¡ng trÃ¬nh
customerList = FileUtils.readFromFile("customers.dat");

```

#### BÆ°á»›c 3: LÆ°u dá»¯ liá»‡u (Sau khi thÃªm/sá»­a/xÃ³a)

Diá»‡p dÃ¹ng hÃ m `saveToFile` tÆ°Æ¡ng á»©ng:

```java
// Má»—i khi thÃªm xong 1 khÃ¡ch hÃ ng, gá»i lá»‡nh nÃ y Ä‘á»ƒ lÆ°u láº¡i ngay
FileUtils.saveToFile(customerList, "customers.dat");

```

---

### 3. LÆ°u Ã½ "sá»‘ng cÃ²n" cho Diá»‡p

Äá»ƒ template nÃ y hoáº¡t Ä‘á»™ng mÃ  khÃ´ng bá»‹ lá»—i **`NotSerializableException`**, Diá»‡p pháº£i Ä‘áº£m báº£o cÃ¡c Model (`Customer`, `Order`) Ä‘Ã£ cÃ³ dÃ²ng nÃ y á»Ÿ Ä‘áº§u:

```java
public class Customer implements java.io.Serializable { ... }

```

---

### Alex Tip ğŸ’¡:

Diá»‡p tháº¥y khÃ´ng, nhá» cÃ³ `<T>`, Diá»‡p chá»‰ cáº§n viáº¿t logic Ä‘á»c file **má»™t láº§n duy nháº¥t**. Sau nÃ y náº¿u bÃ i Lab cÃ³ thÃªm pháº§n quáº£n lÃ½ "NhÃ¢n viÃªn" hay "Kho hÃ ng", Diá»‡p váº«n dÃ¹ng láº¡i Ä‘Ãºng hÃ m nÃ y mÃ  khÃ´ng pháº£i sá»­a má»™t chá»¯ nÃ o! ÄÃ¢y chÃ­nh lÃ  sá»©c máº¡nh cá»§a viá»‡c **TÃ¡i sá»­ dá»¥ng code**.

Diá»‡p Ä‘Ã£ ghÃ©p thÃ nh cÃ´ng hÃ m nÃ y vÃ o lá»›p `FileUtils` chÆ°a? Náº¿u rá»“i, mÃ¬nh sang bÆ°á»›c tiáº¿p theo: Viáº¿t lá»›p **`CustomerManager`** Ä‘á»ƒ báº¯t Ä‘áº§u thá»±c hiá»‡n chá»©c nÄƒng **ThÃªm KhÃ¡ch HÃ ng** nhÃ©! Diá»‡p cÃ³ muá»‘n Alex hÆ°á»›ng dáº«n cÃ¡ch viáº¿t hÃ m `addCustomer` khÃ´ng?